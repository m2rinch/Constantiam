package com.melissarinch.constantiumv1;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;

import com.google.common.util.concurrent.FutureCallback;
import com.google.common.util.concurrent.Futures;
import com.google.common.util.concurrent.ListenableFuture;
import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.melissarinch.constantiumv1.data.Exercise;
import com.melissarinch.constantiumv1.data.Session;
import com.melissarinch.constantiumv1.data.SessionData;
import com.microsoft.windowsazure.mobileservices.MobileServiceClient;

import androidx.appcompat.app.AppCompatActivity;

import android.os.SystemClock;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.Chronometer;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.NumberPicker;
import android.widget.TextView;
import android.widget.Toast;

import java.io.IOException;
import java.net.MalformedURLException;
import java.util.Date;
import static com.microsoft.windowsazure.mobileservices.http.HttpConstants.PostMethod;

public class SessionActivity extends BluetoothActivity {
    private Button sessionButton;
    ImageButton backButton;
    private Chronometer chronometer; // taken from https://www.youtube.com/watch?v=RLnb4vVkftc
    private boolean running;
    private long pauseOffset;
    private EditText weightPicker;
    private ImageView playPause;
    private String sensorData = "9,7,15,1,36,12,63,19,0,22,;,7,6,14,1,35,11,61,21,0,22,;,7,7,13,1,34,12,65,22,0,19,;,7,8,11,1,34,15,65,19,0,20,;,6,8,11,14,5,8,0,44,6,52,;,6,5,8,0,43,5,51,16,0,38,;,5,4,9,0,44,5,52,16,0,39,;,6,5,9,0,45,5,53,16,0,40,;,3,5,9,0,46,6,49,15,0,40,;,3,6,9,1,47,6,49,17,0,41,;,3,6,10,1,47,6,49,15,0,42,;,3,6,9,0,48,6,49,14,0,43,;,3,5,11,1,49,5,51,13,0,43,;,4,5,11,1,49,5,48,14,0,44,;,4,6,10,1,49,4,47,14,0,44,;,3,5,11,1,49,4,48,14,0,45,;,3,5,10,0,48,4,48,15,0,45,;,3,4,11,1,48,5,49,14,0,44,;,3,5,11,1,48,4,48,13,0,47,;,3,5,10,1,49,4,49,14,1,43,;,2,4,10,0,49,4,48,14,0,45,;,2,5,8,0,49,4,47,15,0,45,;,2,4,9,0,49,5,47,14,0,46,;,2,5,9,0,50,5,45,15,0,45,;,1,5,9,0,49,4,44,16,0,45,;,3,5,10,0,49,5,45,16,0,45,;,3,4,8,0,48,4,47,16,0,45,;,3,4,10,0,48,4,48,15,0,44,;,3,5,10,0,46,4,49,16,0,44,;,3,4,10,0,47,4,49,16,0,43,;,3,5,10,1,46,5,49,16,0,43,;,4,5,9,1,46,5,48,16,0,42,;,4,6,11,2,46,5,48,17,0,42,;,4,5,11,2,45,5,50,17,0,42,;,5,6,11,1,45,5,49,17,0,40,;,5,6,10,2,45,5,50,17,0,41,;,6,5,11,1,45,5,50,17,0,41,;,6,6,11,1,45,5,52,17,0,39,;,6,6,11,1,45,5,52,18,0,38,;,5,6,11,1,44,6,52,17,0,36,;,5,6,11,1,42,7,54,17,0,37,;,5,6,11,2,41,7,54,18,0,36,;,6,6,11,1,41,7,55,18,0,37,;,6,5,10,1,40,6,56,17,0,36,;,5,5,10,0,40,7,56,18,0,36,;,5,5,10,1,40,6,54,18,0,36,;,5,5,11,0,40,7,56,17,0,36,;,5,5,11,0,39,7,58,17,0,37,;,5,5,10,0,40,7,57,18,0,36,;,6,5,10,1,40,7,56,18,0,36,;,6,5,10,1,40,6,56,18,0,36,;,6,5,11,1,40,7,56,18,0,36,;,6,5,10,0,40,6,57,18,0,36,;,5,5,10,0,41,6,58,18,0,36,;,8,6,10,2,42,7,58,19,0,36,;,7,6,11,1,42,8,59,18,0,36,;,6,5,11,2,42,7,58,18,0,36,;,7,6,11,1,44,7,57,18,0,36,;,7,6,10,2,45,7,58,17,0,36,;,8,6,10,1,46,7,59,19,0,35,;,7,6,11,2,46,5,63,17,0,35,;,11,6,9,1,47,6,60,12,0,35,;,8,6,8,1,50,10,58,11,0,35,;,10,5,6,2,53,7,60,8,0,36,;,10,4,4,2,58,7,61,7,0,38,;,8,2,2,0,62,7,52,6,0,41,;,8,3,0,0,65,7,48,4,0,45,;,7,1,0,0,67,8,42,3,0,46,;,6,2,0,0,68,9,41,2,0,48,;,4,2,0,0,71,9,36,4,0,50,;,1,1,2,0,72,8,30,1,0,52,;,1,0,2,0,72,9,29,1,0,53,;,2,0,0,0,69,11,25,0,0,52,;,0,0,0,0,63,9,27,0,0,50,;,0,0,0,0,61,7,22,0,0,47,;,0,0,0,0,64,3,19,0,0,35,;,1,0,0,0,66,6,22,0,0,28,;,1,1,0,0,50,6,22,0,0,25,;,0,2,0,0,43,5,28,0,0,32,;,0,2,0,0,46,7,32,0,0,36,;,1,2,0,0,49,6,38,0,0,33,;,2,2,0,0,49,8,43,0,0,33,;,3,0,0,0,52,13,41,0,0,36,;,7,2,0,0,55,19,45,0,0,47,;,8,3,0,1,64,19,55,0,0,38,;,13,3,1,1,63,26,59,0,0,41,;,15,4,0,1,62,31,69,0,0,40,;,15,6,0,2,55,31,74,0,0,31,;,19,8,0,1,57,43,75,0,0,35,;,18,7,0,1,56,38,79,0,0,38,;,17,8,0,1,60,42,85,0,0,44,;,19,10,0,1,74,38,92,0,0,55,;,20,9,0,1,86,35,91,0,0,64,;,18,9,0,2,88,24,92,0,0,74,;,18,10,0,1,93,18,84,0,0,83,;,14,9,0,0,91,14,80,0,0,96,;,12,7,0,0,94,14,68,0,0,101,;,11,5,0,0,97,11,58,0,0,106,;,5,4,0,1,99,12,45,0,0,109,;,2,3,0,0,100,10,23,0,0,110,;,2,2,0,0,98,7,25,0,0,109,;,3,1,0,0,98,2,16,0,0,107,;,1,0,0,0,94,6,12,0,0,106,;,1,0,0,0,94,6,9,0,0,105,;,2,0,0,0,93,10,11,0,0,102,;,0,1,0,0,90,8,12,0,0,105,;,2,0,0,0,84,13,9,0,0,103,;,0,0,0,0,85,13,11,0,0,102,;,1,0,1,0,84,11,10,0,0,104,;,1,0,0,0,78,16,11,0,0,107,;,0,0,0,0,70,11,12,0,0,106,;,0,0,0,0,71,14,11,0,0,103,;,0,0,0,0,69,11,10,0,0,96,;,0,0,0,0,66,13,12,0,0,99,;,0,0,0,0,63,12,19,0,0,91,;,0,0,0,0,60,15,17,0,0,91,;,1,0,0,0,61,15,20,0,0,96,;,0,0,0,0,62,14,22,1,0,95,;,0,0,0,0,62,18,26,1,0,96,;,0,1,1,0,62,13,22,1,0,91,;,0,1,1,0,62,16,22,2,0,83,;,1,2,2,0,62,10,24,2,0,77,;,0,2,1,0,59,13,27,2,0,74,;,0,5,0,0,54,17,28,4,0,70,;,0,5,1,1,49,17,30,3,0,62,;,1,6,1,0,43,18,39,4,0,54,;,8,9,1,1,36,22,46,6,0,44,;,16,9,1,1,32,35,45,8,0,32,;,13,8,0,0,27,45,55,9,0,23,;,12,13,2,0,29,51,58,8,0,16,;,12,9,1,1,26,47,57,5,0,15,;,16,9,0,0,27,52,64,7,0,14,;,21,9,2,2,26,50,69,6,0,10,;,26,7,2,0,20,54,76,7,0,10,;,21,7,4,0,11,53,73,5,0,8,;,21,7,3,0,9,49,74,9,0,8,;,25,5,4,0,9,48,75,8,0,8,;,20,8,3,0,10,50,77,7,0,9,;,18,5,3,0,10,46,80,5,0,12,;,20,6,4,0,12,40,78,4,0,14,;,18,4,3,0,13,38,78,4,0,15,;,23,7,3,0,15,30,72,2,0,18,;,15,7,1,0,16,26,69,0,0,19,;,10,4,0,0,25,21,57,0,0,21,;,1,4,0,1,27,18,48,0,0,23,;,0,3,0,0,35,15,38,0,0,27,;,0,1,0,0,47,10,24,0,0,32,;,0,1,0,0,51,4,18,0,0,35,;,0,1,0,0,58,0,16,0,0,43,;,0,0,0,0,64,2,8,0,0,55,;,0,0,0,0,66,6,13,0,0,70,;,0,0,0,0,61,6,10,0,0,71,;,1,1,0,0,63,9,11,0,0,76,;,3,0,0,0,69,11,13,0,0,80,;,4,1,0,0,66,16,20,0,0,85,;,2,1,0,0,68,14,20,0,0,85,;,3,4,0,0,65,18,26,0,0,78,;,3,3,0,0,67,22,32,0,0,72,;,6,4,0,0,71,23,40,0,0,54,;,10,4,0,0,71,24,48,0,0,49,;,12,6,0,0,72,22,53,0,0,53,;,13,7,0,0,70,22,64,0,0,57,;,14,7,0,1,81,21,62,0,0,65,;,22,6,0,2,93,26,68,0,0,82,;,20,5,0,1,98,20,79,0,0,82,;,17,5,0,0,108,20,82,0,0,94,;,14,5,0,1,113,15,72,0,0,97,;,9,5,0,0,117,15,66,0,0,93,;,8,4,0,1,117,15,59,0,0,96,;,5,4,0,0,118,10,51,0,0,95,;,2,2,0,0,119,4,34,0,0,96,;,2,0,0,0,120,3,24,0,0,97,;,1,0,0,0,111,2,22,0,0,92,;,1,0,0,0,93,0,18,0,0,80,;,0,0,0,0,86,3,16,0,0,71,;,0,0,0,0,87,0,14,0,0,69,;,0,0,0,0,84,0,14,0,0,67,;,1,1,0,0,88,0,11,0,0,69,;,0,0,0,0,90,0,9,0,0,77,;,0,0,0,0,95,0,7,0,0,82,;,1,0,0,0,100,1,10,0,0,83,;,0,0,0,0,104,0,9,0,0,89,;,0,0,0,0,106,2,6,0,0,91,;,0,0,0,0,106,6,4,0,0,87,;,0,0,0,0,104,11,4,0,0,87,;,0,0,0,0,99,8,4,0,0,88,;,0,0,0,0,95,8,5,0,0,87,;,0,0,0,0,89,8,7,0,0,88,;,1,0,0,0,82,12,12,0,0,83,;,0,0,0,0,75,15,14,0,0,82,;,0,0,0,0,78,11,14,0,0,84,;,0,0,0,0,69,11,14,0,0,82,;,2,0,0,0,68,8,17,0,0,82,;,2,1,0,0,64,11,21,0,0,79,;,2,0,0,0,63,13,20,0,0,79,;,4,2,0,0,61,16,22,0,0,82,;,4,2,0,0,55,19,26,2,0,80,;,7,3,0,0,49,20,26,1,0,83,;,10,4,0,1,43,18,32,2,0,82,;,12,3,0,0,39,21,37,3,0,81,;,15,5,1,0,33,18,36,3,0,81,;,25,5,2,0,33,22,35,3,0,81,;,27,4,3,0,29,26,42,5,0,84,;,35,5,7,0,30,38,45,5,0,86,;,40,7,6,0,22,38,48,6,0,85,;,41,3,9,0,17,42,43,7,0,82,;,40,1,5,0,23,47,46,9,0,79,;,36,1,9,0,16,50,45,9,0,79,;,31,1,6,0,19,47,45,10,0,80,;,28,2,2,0,26,45,45,8,0,80,;,24,3,1,0,36,42,44,6,0,79,;,21,2,0,0,38,40,48,4,0,71,;,16,3,1,0,40,32,52,2,0,64,;,17,3,0,0,47,25,42,1,0,58,;,13,4,0,0,44,18,42,0,0,56,;,7,3,0,0,41,15,42,0,0,56,;,4,2,0,0,36,7,40,1,0,55,;,3,0,0,0,36,4,35,0,0,49,;,1,0,0,0,49,0,34,0,0,44,;,0,0,0,0,49,1,30,0,0,40,;,3,4,0,0,55,0,29,0,0,39,;,1,0,0,0,58,2,29,0,0,41,;,3,1,0,0,64,4,29,0,0,52,;,5,1,0,0,66,10,33,0,0,57,;,2,0,0,0,63,7,37,0,0,57,;,3,2,0,0,63,9,43,0,0,48,;,3,1,0,0,64,11,50,0,0,45,;,3,3,0,0,63,15,53,0,0,40,;,4,5,0,0,63,16,62,0,0,30,;,8,10,0,0,55,17,78,1,0,25,;,9,9,0,1,53,20,84,1,0,20,;,10,11,0,1,47,26,96,0,0,15,;,12,11,0,2,38,30,104,1,0,13,;,11,12,0,2,38,32,110,2,0,8,;,11,12,0,0,32,38,120,3,0,10,;,13,13,0,2,39,42,122,4,0,16,;,13,15,0,0,49,48,128,5,0,14,;,5,18,0,1,57,45,131,1,0,10,;,8,21,0,3,64,37,134,3,0,9,;,6,23,0,1,64,27,135,1,0,7,;,4,20,0,2,67,23,124,2,0,5,;,6,21,0,2,68,25,112,1,0,6,;,6,20,0,2,69,26,108,2,0,8,;,2,17,0,1,67,25,95,2,0,6,;,3,15,0,1,72,18,88,1,0,10,;,1,13,0,0,70,19,78,0,1,11,;,0,12,0,0,71,18,67,1,0,15,;,0,10,0,0,69,15,62,0,0,21,;,0,8,0,0,79,15,56,0,0,23,;,2,7,0,0,78,13,52,0,0,24,;,2,5,0,0,81,12,49,0,0,26,;,3,3,0,0,82,12,46,0,0,28,;,1,4,0,0,79,7,40,0,0,25,;,3,2,0,0,77,9,39,0,0,29,;,6,1,0,0,75,9,33,0,0,40,;,6,1,0,0,68,6,29,0,0,41,;,9,0,0,0,65,2,31,0,0,43,;,7,2,0,0,60,2,25,0,0,52,;,7,1,1,0,54,1,27,0,0,51,;,8,1,0,0,45,2,28,0,0,52,;,7,1,2,0,39,1,28,0,0,51,;,9,1,3,0,37,1,30,0,0,49,;,8,1,1,0,34,3,33,0,0,56,;,9,1,1,0,32,3,37,0,0,62,;,13,2,2,0,28,5,40,0,0,58,;,11,3,1,0,32,8,44,0,0,57,;,16,1,2,0,31,6,46,0,0,57,;,14,2,2,0,30,7,53,2,0,49,;,11,2,1,0,29,8,56,0,0,46,;,17,1,0,0,27,11,58,0,0,41,;,15,1,2,0,27,9,63,0,0,38,;,22,3,2,0,28,9,69,0,0,34,;,15,3,3,0,29,10,74,0,0,29,;,15,5,4,0,29,10,75,0,0,33,;,13,7,4,0,29,11,74,1,0,34,;,11,6,2,0,28,11,72,0,0,33,;,13,6,2,0,29,11,74,2,0,33,;,12,5,2,0,33,9,75,0,0,32,;,12,5,2,0,37,9,70,1,0,33,;,10,6,1,0,44,7,68,1,0,41,;,9,5,0,0,52,6,61,0,0,50,;,8,4,1,0,58,6,53,0,0,57,;,8,3,0,0,66,6,44,0,0,64,;,8,2,0,0,68,4,34,0,0,68,;,5,1,0,0,68,1,20,0,0,74,;,3,0,0,0,67,0,21,0,0,82,;,1,0,0,0,65,0,15,0,0,85,;,1,0,0,0,64,0,11,0,0,78,;,1,0,0,0,59,0,13,0,0,72,;,0,0,0,0,63,3,10,0,0,75,;,0,0,0,0,63,5,11,0,0,76,;,0,0,0,0,61,4,9,0,0,70,;,0,0,0,0,66,2,10,0,0,73,;,0,1,0,0,72,3,12,0,0,78,;,0,0,0,0,69,0,7,0,0,70,;,0,1,0,0,63,0,12,0,0,57,;,0,0,0,0,65,0,11,0,0,58,;,0,0,0,0,67,2,19,0,0,61,;,0,2,0,0,65,1,19,0,0,57,;,0,2,0,0,67,3,20,0,0,57,;,0,4,0,0,66,6,30,0,0,60,;,0,6,0,0,65,6,33,0,0,52,;,0,5,0,0,63,7,40,0,0,42,;,1,5,0,0,67,10,45,0,0,38,;,5,7,0,2,72,9,51,0,0,38,;,5,7,0,2,77,8,54,1,0,35,;,7,6,0,3,85,8,56,0,0,36,;,9,6,0,2,90,8,65,0,0,36,;,9,7,0,3,86,9,64,0,0,41,;,11,8,0,3,97,7,67,0,0,34,;,8,6,0,3,90,7,78,1,0,27,;,14,9,0,3,84,8,81,0,0,24,;,14,11,0,2,74,7,83,0,0,22,;,12,11,0,2,68,8,86,0,0,19,;,12,10,0,1,65,5,84,0,0,17,;,10,8,0,2,54,4,79,0,0,11,;,9,9,0,0,45,8,74,0,0,10,;,10,9,0,0,42,8,69,0,0,9,;,10,8,0,0,41,8,63,0,0,9,;,11,6,0,0,29,9,59,0,0,7,;,11,5,0,0,26,7,56,0,0,10,;,11,5,0,0,25,9,54,0,0,12,;,14,4,0,0,20,6,53,0,0,16,;,14,6,0,0,19,8,51,0,0,17,;,17,7,0,0,17,5,49,1,0,15,;,18,6,0,0,17,4,49,0,0,14,;,16,6,0,0,19,4,45,0,0,18,;,14,4,1,0,20,5,41,0,0,28,;,10,8,1,0,21,4,39,0,0,33,;,8,4,2,0,22,3,41,0,0,40,;,12,4,1,0,22,4,39,0,0,43,;,11,4,2,0,23,3,37,0,0,45,;,10,4,1,0,23,3,34,0,0,48,;,9,4,1,0,26,5,35,0,0,49,;,11,4,2,0,26,2,31,0,0,54,;,9,4,1,0,27,4,26,0,0,53,;,10,3,0,0,30,1,26,0,0,56,;,11,3,1,0,29,4,26,0,0,61,;,10,2,0,0,31,4,22,0,0,61,;,12,3,1,0,34,4,23,0,0,58,;,10,3,0,0,40,3,22,0,0,59,;,12,4,1,0,44,1,19,0,0,60,;,13,2,2,0,48,2,20,0,0,58,;,10,2,1,0,55,2,22,0,0,58,;,9,2,1,0,56,4,26,0,0,61,;,12,3,2,0,58,5,25,0,0,64,;,12,2,0,0,62,4,27,0,0,66,;,12,3,2,0,62,4,29,0,0,70,;,13,2,2,0,60,3,29,0,0,70,;,13,2,2,0,54,4,31,0,0,69,;,14,4,3,1,54,4,31,0,0,71,;,14,3,2,0,59,4,31,0,0,70,;,15,3,1,0,65,5,29,0,0,72,;,9,3,0,0,72,4,28,0,0,74,;,5,2,0,0,78,4,22,0,0,79,;,3,0,0,0,78,2,22,0,0,84,;,1,0,0,0,79,3,24,0,0,87,;,1,0,0,0,81,6,20,0,0,84,;,1,0,0,0,83,2,12,0,0,87,;,1,0,0,0,83,1,14,0,0,84,;,1,0,0,0,77,0,9,0,0,86,;,1,0,0,0,73,2,11,0,0,81,;,0,0,0,0,76,1,10,0,0,72,;,0,0,0,0,77,1,8,0,0,68,;,1,0,0,0,74,1,7,0,0,63,;,0,0,0,0,72,1,4,0,0,58,;,2,0,0,0,70,0,2,0,0,54,;,0,0,0,0,68,0,0,0,0,52,;,0,0,0,0,67,1,1,0,0,62,;,0,0,0,0,60,0,2,0,0,67,;,0,0,0,0,59,0,2,0,0,66,;,2,2,0,0,59,0,4,0,0,63,;,1,2,0,0,62,0,7,0,0,62,;,2,6,0,0,63,0,9,0,0,63,;,2,6,0,1,74,1,10,0,0,60,;,2,6,0,1,75,3,22,0,0,51,;,1,5,0,1,62,3,24,0,0,39,;,2,5,0,0,67,1,27,0,0,30,;,4,8,0,1,60,2,36,0,0,22,;,3,6,0,1,70,2,39,0,0,27,;,3,7,0,2,80,2,43,0,0,28,;,4,7,0,0,84,4,44,0,0,36,;,4,6,0,1,87,0,46,0,0,43,;,6,7,0,1,92,1,50,0,0,44,;,4,8,0,1,100,0,53,0,0,56,;,4,9,0,0,108,0,40,0,0,59,;,2,6,0,0,115,0,31,0,0,65,;,3,5,0,0,115,0,31,0,0,66,;,1,5,0,0,113,0,29,0,0,68,;,1,3,0,0,114,0,30,0,0,66,;,0,3,0,0,114,0,26,0,0,63,;,1,3,0,0,107,0,29,0,0,58,;,1,1,0,0,104,1,27,0,0,61,;,1,0,0,0,102,0,25,0,0,50,;,1,1,0,0,95,1,22,0,0,56,;,2,1,0,0,82,0,21,0,0,57,;,1,2,0,0,77,1,23,0,0,51,;,3,3,0,2,68,0,21,0,0,53,;,2,3,0,0,68,1,22,0,0,51,;,4,3,0,0,62,0,26,0,0,49,;,6,2,0,0,59,1,25,0,0,51,;,5,2,0,0,55,1,26,0,0,52,;,6,2,0,0,52,2,28,0,0,54,;,8,1,0,0,46,2,23,0,0,56,;,6,2,2,0,40,3,23,0,0,58,;,7,2,0,0,36,4,24,0,0,60,;,8,2,0,0,37,2,25,0,0,53,;,7,2,0,0,33,0,24,0,0,59,;,6,1,0,0,44,1,23,0,0,60,;,5,1,0,0,34,0,21,0,0,62,;,7,1,0,0,32,1,20,0,0,65,;,6,0,0,0,35,2,18,0,0,63,;,6,0,0,0,38,2,19,0,0,66,;,6,0,0,0,41,0,14,0,0,64,;,8,0,0,0,43,0,16,0,0,65,;,7,1,0,0,45,0,12,0,0,60,;,10,1,0,0,45,0,19,0,0,60,;,12,1,0,0,45,0,21,0,0,61,;,12,4,0,0,45,1,19,0,0,64,;,15,5,1,0,45,0,23,0,0,65,;,12,5,0,0,43,0,26,0,0,65,;,11,6,1,0,41,2,32,0,0,65,;,10,5,0,1,41,2,34,0,0,65,;,11,6,3,0,42,3,33,0,0,65,;,13,5,1,0,46,3,36,0,0,65,;,17,4,0,0,48,3,38,0,0,65,;,12,3,0,0,54,3,36,0,0,67,;,12,3,0,0,61,2,35,0,0,68,;,10,2,0,0,65,2,33,0,0,71,;,8,3,0,0,68,2,30,0,0,74,;,3,1,0,0,66,2,27,0,0,76,;,6,0,0,0,58,2,26,0,0,77,;,5,1,0,0,48,1,22,0,0,76,;,4,0,0,0,44,1,18,0,0,75,;,7,0,0,0,39,0,18,0,0,67,;,4,0,0,0,33,0,10,0,0,53,;,4,0,0,0,26,0,13,0,0,42,;,4,0,0,0,29,0,14,0,0,46,;,5,0,0,0,43,0,18,0,0,48,;,1,0,0,0,50,0,20,0,0,53,;,0,0,0,0,45,0,24,0,0,57,;,0,2,0,0,50,0,26,0,0,54,;,0,4,0,0,37,0,29,0,0,50,;,0,5,0,0,36,0,31,0,0,52,;,3,5,0,0,46,0,36,0,0,52,;,4,6,0,0,51,0,37,0,0,40,;,4,5,0,0,57,0,41,0,0,39,;,3,6,0,0,60,0,43,0,0,33,;,4,6,0,1,64,1,45,0,0,24,;,4,7,0,1,64,1,43,0,0,23,;,2,6,0,1,66,3,48,0,0,28,;,3,7,0,0,74,2,57,0,0,31,;,4,7,0,1,76,1,48,0,0,31,;,3,7,0,0,81,2,50,0,0,41,;,5,8,0,1,88,1,51,0,0,34,;,3,8,0,1,93,0,55,0,0,43,;,1,9,0,1,100,0,54,0,0,46,;,3,7,0,1,104,0,52,0,0,46,;,2,10,0,0,101,0,58,0,0,33,;,1,9,0,1,97,0,47,0,0,34,;,1,9,0,0,95,0,43,0,0,29,;,2,8,0,0,92,0,41,0,0,24,;,3,6,0,0,91,0,37,0,0,30,;,3,5,0,0,89,0,34,0,0,36,;,0,5,0,0,92,0,27,0,0,49,;,2,2,0,0,100,0,21,0,0,51,;,0,0,0,0,102,0,14,0,0,58,;,1,0,0,0,104,0,12,0,0,69,;,0,0,0,0,107,0,11,0,0,71,;,0,0,0,0,114,0,9,0,0,76,;,0,0,0,0,112,0,5,0,0,76,;,0,0,0,0,108,0,1,0,0,85,;,1,0,0,0,109,0,0,0,0,86,;,4,0,0,0,104,0,0,0,0,90,;,1,0,0,0,98,0,0,0,0,89,;,0,0,0,0,93,0,0,0,0,93,;,1,0,0,0,93,0,0,0,0,93,;,1,0,0,0,92,0,0,0,0,95,;,0,0,0,0,93,0,0,0,0,92,;,0,0,0,0,97,0,0,0,0,98,;,0,0,0,0,89,0,0,0,0,102,;,0,0,0,0,86,0,1,0,0,105,;,0,0,0,0,82,0,0,0,0,106,;,0,0,0,0,78,0,1,0,0,106,;,1,0,0,0,74,0,0,0,0,109,;,0,0,0,0,75,0,2,0,0,116,;,1,0,0,0,73,0,2,0,0,112,;,0,0,0,0,80,0,1,0,0,112,;,3,0,0,0,76,0,1,0,0,110,;,2,0,0,0,78,0,3,0,0,103,;,4,0,0,0,75,0,7,0,0,95,;,5,0,0,0,70,3,9,0,0,84,;,5,0,0,0,71,4,8,0,0,84,;,5,0,0,0,71,4,10,0,0,86,;,7,1,0,0,68,4,15,0,0,82,;,5,0,0,0,69,4,15,0,0,83,;,5,1,0,0,69,2,20,0,0,87,;,5,0,0,0,77,0,16,0,0,90,;,4,1,0,0,80,2,20,0,0,92,;,3,1,0,0,82,2,21,0,0,91,;,3,0,1,0,77,2,22,0,0,90,;,1,0,0,0,77,1,23,0,0,89,;,1,0,0,0,77,1,22,0,0,88,;,1,0,0,2,82,1,21,0,0,88,;,0,0,0,0,85,0,21,0,0,90,;,0,0,0,0,87,0,17,0,0,90,;,0,0,0,0,95,0,17,0,0,87,;,0,0,0,0,91,0,15,0,0,80,;,0,0,0,0,82,0,15,0,0,75,;,0,0,0,0,78,0,15,0,0,69,;,0,0,0,0,64,0,14,0,0,61,;,0,0,0,0,47,0,16,0,0,48,;,0,0,0,0,32,0,15,0,0,38,;,0,0,0,0,40,0,20,0,0,32,;,0,0,0,0,42,0,18,0,0,31,;,0,0,0,0,59,0,20,0,0,31,;,1,2,0,0,62,0,25,0,0,37,;,1,1,0,0,62,0,28,0,0,39,;,5,4,0,0,66,0,30,0,0,32,;,10,2,0,0,65,2,37,0,0,27,;,15,4,0,0,65,3,44,0,0,22,;,20,5,0,1,54,5,49,0,0,18,;,22,3,0,0,49,3,66,0,0,15,;,25,6,0,1,38,4,70,0,0,9,;,23,4,0,1,35,8,76,0,0,8,;,27,8,0,1,24,6,95,0,0,4,;,21,11,0,1,9,6,96,0,0,4,;,16,9,0,0,5,3,102,0,0,0,;,13,13,0,1,7,8,107,0,0,1,;,10,14,0,0,6,10,111,1,0,2,;,8,17,0,0,12,14,121,1,0,2,;,10,16,0,1,17,11,130,1,0,5,;,11,16,0,0,11,5,135,3,0,4,;,9,16,0,0,16,3,139,1,0,3,;,11,18,0,0,19,4,134,0,0,0,;,9,18,0,1,19,1,124,0,0,3,;,10,18,0,1,16,0,120,0,0,0,;,12,14,0,0,18,0,105,0,0,2,;,11,13,0,0,20,1,101,1,0,2,;,11,14,0,0,24,0,94,1,0,4,;,12,10,0,1,26,1,89,0,0,5,;,12,8,0,0,35,1,76,0,0,6,;,12,7,0,1,44,1,69,0,0,10,;,13,7,0,0,42,2,64,0,0,14,;,12,6,0,0,45,1,57,0,0,16,;,14,5,0,0,45,0,52,0,0,25,;,13,5,0,0,42,0,47,0,0,28,;,12,5,0,0,35,1,41,0,0,29,;,13,5,0,0,36,1,36,0,0,35,;,12,4,0,0,37,1,33,0,0,34,;,11,4,0,0,36,0,29,0,0,37,;,9,3,0,0,36,1,29,0,0,42,;,9,4,0,0,34,1,29,0,0,42,;,10,2,0,0,31,1,31,0,0,36,;,9,1,0,0,28,1,30,0,0,36,;,9,2,0,0,25,1,32,0,0,38,;,10,1,0,0,25,0,31,0,0,40,;,9,2,0,0,20,1,34,0,0,41,;,10,3,0,0,21,1,35,0,0,42,;,11,2,0,0,21,1,37,0,0,44,;,11,3,0,0,20,1,40,0,0,43,;,13,5,2,0,22,2,42,0,0,41,;,14,3,1,0,26,2,44,2,0,35,;,14,4,1,0,26,2,44,0,0,36,;,13,5,2,0,26,1,45,0,0,35,;,17,4,1,0,27,0,46,0,0,32,;,18,3,4,0,28,2,47,0,0,31,;,21,2,3,0,30,3,48,0,0,33,;,17,4,4,0,32,2,49,0,0,37,;,18,4,3,0,32,1,53,0,0,39,;,14,4,3,0,34,1,54,0,0,42,;,15,4,2,0,36,2,54,0,0,46,;,16,4,2,0,38,1,49,0,0,47,;,11,2,1,0,39,2,48,0,0,44,;,11,2,0,0,43,1,49,0,0,48,;,10,1,0,0,52,0,41,0,0,59,;,13,1,0,0,59,0,39,0,0,67,;,11,0,0,0,64,0,36,0,0,76,;,12,0,0,0,65,0,31,0,0,81,;,9,0,0,0,73,0,29,0,0,83,;,10,0,0,0,72,0,18,0,0,81,;,11,0,0,0,71,0,17,0,0,80,;,9,0,0,0,70,0,13,0,0,75,;,4,0,0,0,65,0,15,0,0,69,;,6,1,0,0,58,0,12,0,0,64,;,2,1,0,0,55,0,13,0,0,56,;,2,0,0,0,55,0,15,0,0,48,;,0,1,0,0,52,0,15,0,0,47,;,1,1,0,0,60,0,14,0,0,46,;,3,1,0,0,64,0,15,0,0,43,;,1,1,0,0,61,0,15,0,0,47,;,1,2,0,0,59,0,19,0,0,43,;,3,1,0,0,62,0,24,0,0,39,;,7,2,0,0,67,0,28,0,0,41,;,11,2,0,0,65,0,33,0,0,35,;,11,1,0,0,65,1,38,0,0,34,;,15,2,0,0,63,2,47,0,0,31,;,15,1,0,0,64,2,51,0,0,29,;,15,2,0,0,59,3,63,0,0,25,;,15,3,0,0,55,2,65,0,0,23,;,17,3,0,0,47,2,64,0,0,22,;,17,3,0,0,36,4,70,0,0,26,;,14,4,0,0,35,3,71,0,0,24,;,19,3,0,0,35,0,71,0,0,26,;,22,4,0,0,36,1,75,0,0,31,;,22,4,0,0,42,0,76,0,0,26,;,20,5,0,1,54,0,71,0,0,32,;,19,6,1,1,57,0,70,0,0,36,;,15,8,1,1,59,0,75,0,0,39,;,16,7,0,1,66,0,69,0,0,38,;,19,9,0,0,57,0,67,0,0,36,;,19,7,1,0,62,0,64,0,0,34,;,22,6,0,0,44,0,61,0,0,32,;,26,6,0,5,41,0,56,0,0,34,;,25,4,2,1,48,0,53,0,0,30,;,31,4,3,0,48,0,46,0,0,31,;,26,4,1,0,39,1,40,0,0,42,;,31,3,2,0,47,0,43,0,0,48,;,30,1,0,0,44,0,41,0,0,51,;,38,1,0,0,70,0,36,0,0,57,;,29,1,0,0,64,0,35,4,0,60,;,27,0,0,0,75,0,29,0,0,69,;,20,0,0,0,90,0,21,3,0,72,;,7,0,0,0,103,0,14,0,0,81,;,7,0,0,0,111,0,10,0,0,90,;,1,0,0,0,112,0,8,0,0,94,;,1,0,0,0,114,0,6,0,0,92,;,3,0,0,0,119,0,2,0,0,92,;,4,0,0,0,123,0,0,0,0,91,;,5,0,0,0,121,0,0,0,0,95,;,4,0,0,0,120,0,0,0,0,96,;,4,0,0,0,117,0,2,0,0,98,;,3,0,0,0,110,5,3,0,0,97,;,3,0,0,0,92,8,8,0,0,95,;,5,0,0,0,77,14,14,0,0,91,;,11,0,1,0,69,14,14,0,0,76,;,12,3,1,0,58,16,23,0,0,78,;,16,2,4,0,51,21,25,0,0,75,;,22,2,3,0,46,23,24,1,0,75,;,17,2,5,0,40,25,23,6,0,67,;,22,2,6,0,39,19,26,5,0,60,;,20,3,4,0,36,28,29,9,0,56,;,27,1,5,0,33,33,30,11,0,51,;,31,0,7,0,32,34,30,12,0,47,;,36,1,8,0,28,35,33,13,0,47,;,42,1,8,0,30,28,37,13,0,50,;,50,2,9,0,32,24,46,10,0,56,;,48,2,11,0,33,28,53,11,0,61,;,47,1,13,0,33,29,50,10,0,59,;,49,3,10,0,32,28,55,11,0,54,;,43,3,12,0,31,28,48,11,0,52,;,37,3,8,0,34,24,41,5,0,55,;,32,3,5,0,40,19,41,4,0,62,;,24,2,0,0,47,11,39,0,0,68,;,19,2,0,0,54,6,32,0,0,71,;,16,1,0,0,62,7,32,0,0,71,;,14,1,0,0,70,7,30,0,0,73,;,12,0,0,0,72,6,27,0,0,76,;,11,1,0,0,72,3,27,0,0,77,;,8,0,0,1,70,1,21,0,0,77,;,11,0,0,0,70,3,18,0,0,77,;,7,0,0,0,69,2,17,0,0,75,;,8,1,0,0,62,2,14,0,0,70,;,5,0,0,0,58,2,12,0,0,61,;,2,0,0,0,58,2,14,0,0,59,;,2,0,0,0,54,2,17,0,0,55,;,4,0,0,0,52,2,19,0,0,47,;,5,0,0,0,56,5,21,0,0,39,;,5,0,0,0,56,8,25,0,0,37,;,3,0,0,0,54,10,27,0,0,39,;,3,2,0,0,53,12,34,0,0,38,;,3,3,0,0,52,11,37,0,0,37,;,4,2,0,0,46,9,43,0,0,28,;,5,3,0,0,41,5,60,0,0,18,;,6,5,1,0,33,5,56,0,0,14,;,8,7,2,1,33,6,67,0,0,17,;,9,8,6,1,34,5,74,0,0,12,;,13,9,4,1,34,10,74,0,0,12,;,12,8,6,1,32,8,76,0,0,12,;,13,10,3,1,29,12,78,0,0,10,;,12,11,4,0,33,7,85,0,0,7,;,10,11,2,2,31,6,85,0,0,10,;,11,19,6,0,31,5,91,3,0,10,;,9,19,1,2,27,5,86,0,0,11,;,10,17,1,1,16,2,90,0,0,10,;,5,15,1,0,21,3,94,1,0,11,;,7,13,0,1,17,3,97,2,0,12,;,8,12,0,0,21,4,101,1,0,18,;,5,10,1,0,24,5,97,1,0,19,;,7,6,0,0,29,2,93,0,0,24,;,5,8,0,0,32,2,84,0,0,24,;,5,4,0,0,40,1,80,0,0,28,;,7,4,0,0,39,2,72,0,0,29,;,7,1,0,0,46,1,65,0,0,34,;,6,2,0,0,53,0,56,0,0,44,;,5,3,0,0,53,0,50,0,0,46,;,3,2,0,0,53,2,47,0,0,57,;,2,2,0,0,56,0,42,0,0,59,;,3,2,0,0,57,1,42,0,0,61,;,3,3,0,0,55,2,44,0,0,62,;,4,3,1,0,55,1,41,0,0,60,;,5,2,0,0,49,0,43,0,0,58,;,6,2,0,0,45,0,41,0,0,62,;,5,3,1,0,40,0,42,0,0,57,;,7,3,3,0,36,0,41,0,0,50,;,6,3,1,0,34,0,39,0,0,53,;,6,4,2,0,27,1,39,0,0,45,;,6,5,2,0,28,1,43,0,0,40,;,6,5,3,0,24,1,47,0,0,32,;,5,5,2,0,21,0,49,0,0,31,;,2,5,4,0,19,0,51,0,0,23,;,5,5,0,0,17,0,52,1,0,16,;,5,4,0,0,21,0,49,1,0,15,;,6,4,0,0,20,1,48,1,0,13,;,5,4,0,0,20,0,47,2,0,12,;,7,5,1,0,22,0,48,0,0,15,;,8,5,0,0,27,0,44,1,0,17,;,8,5,2,0,28,0,44,2,0,21,;,9,5,2,0,34,0,43,1,0,26,;,8,5,3,0,34,1,44,1,0,32,;,12,6,4,0,37,1,48,1,0,35,;,15,7,6,1,38,0,49,1,0,40,;,13,6,5,0,36,2,52,1,0,38,;,14,7,6,0,35,2,55,1,0,39,;,14,6,7,0,28,3,60,0,0,34,;,11,7,10,0,27,1,63,3,0,30,;,15,8,5,1,27,1,64,4,0,29,;,15,7,6,1,23,1,65,2,0,28,;,15,9,6,1,21,1,66,1,0,26,;,15,8,8,1,21,1,66,1,0,27,;,13,7,7,0,22,1,68,0,0,27,;,13,9,8,0,21,1,69,1,0,26,;,16,10,5,1,19,2,68,1,0,23,;,12,8,6,0,16,0,67,0,0,20,;,15,8,8,0,12,0,62,0,0,15,;,17,7,7,0,15,1,57,0,0,16,;,13,7,6,0,14,1,51,0,0,15,;,13,5,6,0,12,0,45,0,0,20,;,9,2,1,0,17,0,44,0,0,28,;,10,3,0,0,17,0,39,0,0,26,;,8,3,0,0,17,0,32,0,0,26,;,4,1,0,0,16,0,30,0,0,25,;,2,3,0,0,16,0,37,0,0,26,;,4,3,0,0,18,0,37,0,0,28,;,5,4,0,0,22,0,39,0,0,28,;,4,5,3,0,24,0,43,0,0,26,;,3,6,0,0,28,0,47,0,0,26,;,4,4,0,0,26,0,50,0,0,29,;,4,9,0,1,29,0,48,0,0,27,;,4,9,0,0,28,0,52,0,0,26,;,5,10,1,1,27,0,60,0,0,26,;,3,13,0,1,27,0,69,0,0,30,;,5,8,1,0,24,1,75,0,0,28,;,6,13,1,0,22,0,76,0,0,25,;,10,16,1,1,36,1,74,0,0,22,;,22,15,0,1,37,1,76,0,0,28,;,21,12,0,0,44,0,80,0,0,22,;,26,10,0,0,37,0,72,0,0,20,;,25,12,0,0,42,0,67,0,0,27,;,23,10,0,0,50,0,62,0,0,31,;,24,12,0,1,63,0,57,0,0,39,;,23,11,0,0,76,0,50,0,0,44,;,26,7,0,0,81,0,45,0,0,50,;,20,6,0,0,81,0,41,0,0,54,;,11,4,0,0,77,0,36,0,0,63,;,9,4,0,0,72,0,31,0,0,66,;,9,4,0,0,72,0,28,0,0,69,;,14,4,0,0,75,0,22,0,0,70,;,14,3,0,0,80,0,18,0,0,70,;,12,1,0,0,84,0,14,0,0,75,;,11,1,0,0,86,0,16,0,0,73,;,12,0,0,0,94,0,11,0,0,81,;,9,1,0,0,90,0,9,0,0,87,;,9,2,0,0,92,0,13,0,0,88,;,9,1,0,0,88,0,15,0,0,86,;,11,0,0,0,86,0,11,0,0,87,;,12,1,0,0,82,0,13,0,0,86,;,12,0,0,0,74,0,14,0,0,85,;,10,0,0,0,72,0,9,0,0,87,;,9,0,0,0,72,0,13,0,0,88,;,7,0,0,0,73,0,15,0,0,88,;,7,0,0,0,73,0,12,0,0,85,;,7,0,0,0,73,0,16,0,0,79,;,8,0,0,0,70,0,12,0,0,82,;,7,0,0,0,69,0,12,0,0,78,;,8,0,0,0,65,0,10,0,0,80,;,7,0,0,0,67,0,11,0,0,73,;,9,0,0,0,68,0,12,0,0,76,;,8,0,0,0,68,0,16,0,0,79,;,6,0,0,0,71,0,19,0,0,75,;,5,0,0,0,70,0,19,0,0,72,;,6,0,0,0,75,0,21,0,0,73,;,3,0,0,0,71,0,21,0,0,78,;,4,0,0,0,75,0,20,0,0,79,;,5,0,0,0,79,0,21,0,0,81,;,6,0,0,0,84,0,20,0,0,85,;,8,0,0,0,86,0,22,0,0,88,;,10,1,0,0,88,0,22,0,0,90,;,10,0,1,0,90,0,29,0,0,91,;,13,1,0,0,90,0,31,0,0,87,;,12,0,0,0,86,0,31,0,0,78,;,12,0,0,0,81,0,35,0,0,69,;,12,1,0,0,79,0,33,1,0,64,;,11,1,0,0,77,0,33,0,0,61,;,10,1,0,0,74,0,35,0,0,58,;,10,1,0,0,70,0,36,0,0,56,;,11,2,0,0,66,0,40,0,0,57,;,13,2,0,0,66,0,44,0,0,59,;,12,2,0,0,62,0,43,1,0,61,;,13,1,0,0,58,0,42,2,0,64,;,13,2,0,0,52,0,43,1,0,68,;,12,3,1,0,48,0,42,1,0,69,;,11,2,2,0,43,0,44,0,0,72,;,11,3,1,0,38,0,47,0,0,77,;,9,2,1,0,33,0,47,0,0,79,;,7,2,1,0,32,0,50,0,0,83,;,8,2,1,0,31,0,49,1,0,88,;,11,2,0,0,31,0,50,1,0,86,;,12,2,2,0,30,0,52,0,0,84,;,12,2,0,0,27,0,55,0,0,85,;";
    private Gson gson = new Gson();
    Exercise exercise;
    TextView exerciseName;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_session_mobile);
        playPause = findViewById(R.id.playPauseSession);
        weightPicker = findViewById(R.id.weightEnter);
        playPause.setImageResource(R.drawable.play);
        chronometer = findViewById(R.id.chronometer);
        sessionButton = findViewById(R.id.session_button);
        sessionButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                try {
                    onClickStopBlue();
                }  catch (IOException e) {
                    e.printStackTrace();
                }
                try{

                    sendString(blueData);
                }
                catch (MalformedURLException e) {
                    e.printStackTrace();
                }
            }
        });
        exerciseName = findViewById(R.id.exerciseName);
        backButton = findViewById(R.id.backButton);
        backButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent intent = new Intent(getApplicationContext(), CalibrationActivity.class);
                intent.putExtra("Exercise", exercise);
                startActivity(intent);
            }
        });
        if (getIntent().hasExtra("Exercise")) {
            exercise = (Exercise) getIntent().getSerializableExtra("Exercise");
            exerciseName.setText(exercise.getText());
        }

        weightPicker.setOnKeyListener(new View.OnKeyListener() {
            public boolean onKey(View view, int keyCode, KeyEvent event) {
                if (keyCode == KeyEvent.KEYCODE_ENTER) {
                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(view.getApplicationWindowToken(), 0);
                    weightPicker.setFocusable(false);
                    weightPicker.setFocusableInTouchMode(true);
                    weightPicker.setCursorVisible(false);
                    return true;
                } else {
                    weightPicker.setCursorVisible(true);
                    return false;
                }
            }
        });
    }

    // user logs in
    // sees the play button -> should not see pause and finish and restart session
    // clicks play -> set timer to running
    // change play button to pause, show finish button
    // clicks (now) pause button -> set timer to !running,
    // clicks finish button, -> set timer to !running, send string
    public void controlStopwatch(View v){
        if(!running){
            onClickStartBlue();
            playPause.setImageResource(R.drawable.stop);
            chronometer.setBase(SystemClock.elapsedRealtime() - pauseOffset);
            chronometer.start();
            running = true;

        } else {
            playPause.setImageResource(R.drawable.play);
            pauseStopwatch();
        }
    }

    public void pauseStopwatch(){
            chronometer.stop();
            pauseOffset = SystemClock.elapsedRealtime() - chronometer.getBase();
            running = false;
    }

    public void restartSession(View view){
        Intent intent = new Intent(getApplicationContext(), SessionActivity.class);
        intent.putExtra("Exercise", exercise);
        startActivity(intent);
    }

    public static void hideSoftKeyboard (Activity activity, View view)
    {
        InputMethodManager imm = (InputMethodManager)activity.getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(view.getApplicationWindowToken(), 0);
    }

    public void sendString(String _sensorData) throws MalformedURLException {

        if(_sensorData == "") {
            _sensorData = sensorData;
        }

        Log.i("Session Activity", _sensorData);
        SessionData sessionData = new SessionData();
        sessionData.setmId("1");
        sessionData.setmCreatedAt(new Date());
        sessionData.setmDuration((double)pauseOffset);
        sessionData.setmExerciseId(Integer.parseInt(exercise.getId()));
        sessionData.setmUserId(1);
        sessionData.setmSensorData(_sensorData);

        if(weightPicker.getText().toString().equals("")) {
            sessionData.setmWeight(0);
        }
        else {
            sessionData.setmWeight(Integer.parseInt(weightPicker.getText().toString()));
        }
        // Log.d("Session Activity JSON", gson.toJson(sessionData));
        JsonElement sessionJSON = new JsonParser().parse(gson.toJson(sessionData));

        // Create the MobileService Client object and set your backend URL        
        String yourURL = "http://constantiam.azurewebsites.net/";
        MobileServiceClient mClient = new MobileServiceClient(yourURL, this);     // Your query pointing to /api/values/{String}
        ListenableFuture<JsonElement> query = mClient.invokeApi("sessionData", sessionJSON, PostMethod, null);


        // Callback method
        Futures.addCallback(query, new FutureCallback<JsonElement>() {
            @Override
            public void onSuccess(JsonElement jsonElement) {

                // You are expecting a String you can just output the result.
                JsonObject result = jsonElement.getAsJsonObject();
                result.remove("constantiam_user");
                result.remove("exercise");
                result.remove("key_char");

                final Session session = new Gson().fromJson(result.toString(), Session.class);
                // go to feedback screen if successful and send session object
                Intent intent = new Intent(getApplicationContext(), ExerciseFeedbackActivity.class);
                Bundle bundle = new Bundle();
                bundle.putSerializable("Exercise", exercise);
                bundle.putSerializable("Session", session);
                intent.putExtras(bundle);
                startActivity(intent);

                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {

                       // Toast.makeText(getApplicationContext(), String.valueOf("COP_overall: " + session.getmCOPOverall()), Toast.LENGTH_LONG).show();
                    }
                });

            }

            @Override
            public void onFailure(Throwable throwable) {
                Log.d("Session Activity", "onFailure: " + throwable.getMessage());
            }
        });
    }
}